!function(){"use strict";angular.module("rrrEmil",["ngRoute","ngMaterial","ngLodash","pascalprecht.translate"]).constant("CONFIG",{}).config(["$logProvider",function(e){e.debugEnabled(!0)}]).config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("lime").accentPalette("blue-grey").warnPalette("deep-orange").dark()}]).config(["$translateProvider",function(e){e.translations("de",{APP_HEADLINE:"Solo-Variante - Emil will spielen",START_ROUND:"Runde",NEW_ROUND:"Nächste Runde",NEW_GAME:"Neues Spiel",END_GAME:"Spiel beendet",POINTS:"Hast du mindestens {{points}} Punkte?",RULES:"Regeln",PLAYER_ACTIONS:"Vom Spieler besetzte Felder oder noch nicht nutzbare Aktionen",EMIL_ACTIONS:"Von Emil blockierte Felder",EMIL_LAST_ACTION:"Emil möchte das folgende Feld besetzen",EMIL_PASSES:"Emil hat gepasst",COAL_MODULE:"Verwende das Kohle-Modul",COSTS_COINS:"{{coins}} Münze",COSTS_WORKER:"{{worker}} Arbeiter",COSTS_WORKER_COINS:"{{worker}} Arbeiter und {{coins}} Münze",CARD_0:"3 schwarze Gleise",CARD_1:"3 silberne Gleise",CARD_2:"1 braunes Gleis",CARD_3:"2 braune Gleise",CARD_4:"1 holzfarbenes Gleis",CARD_5:"2 holzfarbene Gleise",CARD_6:"1 weißes Gleis",CARD_7:"2 weiße Gleise",CARD_8:"2 beliebige Gleise",CARD_9:"Nimm eine Lokomotive oder eine Fabrik",CARD_10:"Nimm eine Lokomotive und eine Fabrik",CARD_11:"Benutze den Ingenieur",CARD_12:"Den Ingenieur anwerben",CARD_13:"1 Schritt auf der Industrieleiste",CARD_14:"2 Schritte auf der Industrieleiste",CARD_15:"Nimm einen x2 Marker",CARD_16:"Nimm eine Kohle"}),e.translations("en",{APP_HEADLINE:"Solo-Variant - Emil wants to play",START_ROUND:"Round",NEW_ROUND:"Next round",NEW_GAME:"New game",END_GAME:"Game finished",POINTS:"Have you reached {{points}} points?",RULES:"Rules",PLAYER_ACTIONS:"Actions used by player or not available yet",EMIL_ACTIONS:"Fields blocked by Emil",EMIL_LAST_ACTION:"Emil wants to block the following field",EMIL_PASSES:"Emil has passed",COAL_MODULE:"Include coal-module",COSTS_COINS:"{{coins}} coin",COSTS_WORKER:"{{worker}} worker",COSTS_WORKER_COINS:"{{worker}} worker and {{coins}} coin",CARD_0:"3 black tracks",CARD_1:"3 silver tracks",CARD_2:"1 brown track",CARD_3:"2 brown tracks",CARD_4:"1 natural track",CARD_5:"2 natural tracks",CARD_6:"1 white track",CARD_7:"2 white tracks",CARD_8:"2 wildcard tracks",CARD_9:"Take either a locomotive or a factory",CARD_10:"Take a locomotive and a factory",CARD_11:"Use the public engineer",CARD_12:"Recruit the engineer",CARD_13:"1 move on industry track",CARD_14:"2 moves on industry track",CARD_15:"Take a 2x double marker",CARD_16:"Take a coal"}),e.registerAvailableLanguageKeys(["en","de"],{"en*":"en","de*":"de"}),e.determinePreferredLanguage(),e.useSanitizeValueStrategy("escape")}]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).when("/game",{templateUrl:"app/game/game.html",controller:"GameController",controllerAs:"game"}).when("/rules",{templateUrl:"app/rules/rules.html",controller:"RulesController",controllerAs:"rules"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";function e(e,n){var t=this;t.home=function(){e.path("/")},t.isGerman=function(){return"de"===n.use()}}e.$inject=["$location","$translate"],angular.module("rrrEmil").controller("RulesController",e)}(),function(){"use strict";function e(e,n,t){var a=this;a.includeCoalModule=!1,a.newGame=function(){t.init(a.includeCoalModule),e.path("/game")},a.switchLanguage=function(e){n.use(e)},a.showRules=function(){e.path("/rules")}}e.$inject=["$location","$translate","Game"],angular.module("rrrEmil").controller("MainController",e)}(),function(){"use strict";function e(e){var n,t=!1,a=[],i=[],r=[],o=6,d=6,l=[{id:0,worker:2,coins:0},{id:1,worker:2,coins:0},{id:2,worker:1,coins:0},{id:3,worker:2,coins:0},{id:4,worker:1,coins:0},{id:5,worker:2,coins:0},{id:6,worker:1,coins:0},{id:7,worker:2,coins:0},{id:8,worker:1,coins:1},{id:9,worker:1,coins:0},{id:10,worker:3,coins:0},{id:11,worker:1,coins:0},{id:12,worker:0,coins:1},{id:13,worker:1,coins:0},{id:14,worker:2,coins:0},{id:15,worker:1,coins:0},{id:16,worker:1,coins:0}],s=function(){r=e.filter(l,function(n){var r=o-e.sumBy(a,"worker");return 0==r||r-n.worker<0?!1:16!=n.id||t?e.includes(a,n,"id")?!1:e.includes(i,n,"id")?!1:!0:!1})},m={};return m.init=function(e){o=6,d=e?5:6,a.length=0,i.length=0,r.length=0,t=e,m.drawCard()},m.drawCard=function(){s(),n=e.sample(r),n&&a.push(n)},m.rejectCard=function(){if(a.length>0)var n=e.last(a);n&&!e.includes(i,n,"id")&&(i.push(n),a.length--,m.drawCard())},m.newRound=function(e){e&&8>o&&o++,d--,a.length=0,i.length=0,m.drawCard()},m.getLast=function(){return n},m.getPlayedCards=function(){return n?e.slice(a,0,a.length-1).reverse():e.clone(a).reverse()},m.canDrawCards=function(){return m.nrCards()>0&&m.getAvailableWorkers()>0},m.nrCards=function(){return r.length},m.getOccupiedCards=function(){return e.clone(i).reverse()},m.getAvailableWorkers=function(){return o-e.sumBy(a,"worker")+(n?n.worker:0)},m.getPoints=function(){return 8==o?"150+":7==o?"50+":6==o?"< 50":void 0},m.getWorkers=function(){return o},m.addWorker=function(){8>o&&o++,s()},m.setWorker=function(e){e>=6&&8>=e&&(o=e),s()},m.getRound=function(){return(t?5:6)-d+1},m.getRounds=function(){return t?5:6},m.isLastRound=function(){return 0===m.nrCards()&&m.getRound()==m.getRounds()},m.hasMoreRounds=function(){return 0===m.nrCards()&&m.getRound()<m.getRounds()},m.removeFromOccupiedCards=function(t){e.remove(i,t,"id"),s(),n||m.drawCard()},m.removeFromPlayedCards=function(t){e.remove(a,t,"id"),s(),n||m.drawCard()},e.forEach(l,function(e){e.action=function(){return"CARD_"+e.id}}),e.forEach(l,function(e){e.cost=function(){var n="COSTS";return e.worker>0&&(n+="_WORKER"),e.coins>0&&(n+="_COINS"),n}}),m.init(),m}e.$inject=["lodash"],angular.module("rrrEmil").service("Game",e)}(),function(){"use strict";function e(e,n,t){var a=this;a.data=t,a.pointChange=!1,a.fabOpen=!1,a.hasMoreRounds=function(){return a.points={points:6==t.getWorkers()?50:150},t.hasMoreRounds()},a.home=function(){e.path("/")}}e.$inject=["$location","lodash","Game"],angular.module("rrrEmil").controller("GameController",e)}(),angular.module("rrrEmil").run(["$templateCache",function(e){e.put("app/game/game.html",'<md-content layout=column layout-fill><md-toolbar class=md-medium-tall layout=row layout-align="center center"><div flex layout=column layout-align="center center"><md-icon class=material-icons>content_copy</md-icon>{{game.data.nrCards()}}</div><div flex layout=column layout-align="center center"><md-icon class=material-icons>person</md-icon>{{game.data.getAvailableWorkers()}} / {{game.data.getWorkers()}}</div><div flex layout=column layout-align="center center"><md-icon class=material-icons>star</md-icon>{{game.data.getPoints()}}</div><div flex layout=column layout-align="center center"><md-icon class=material-icons>hourglass_empty</md-icon>{{game.data.getRound()}} / {{game.data.getRounds()}}</div></md-toolbar><md-list><md-subheader class=md-no-sticky ng-if=!game.data.getLast()>{{\'EMIL_PASSES\' | translate}}</md-subheader><md-subheader class=md-no-sticky ng-if=game.data.getLast()>{{\'EMIL_LAST_ACTION\' | translate}}</md-subheader><md-list-item class=md-2-line ng-if=game.data.getLast()><div class=md-list-item-text layout=column layout-align="center center"><h3>{{game.data.getLast().action() | translate}}</h3><p>{{game.data.getLast().cost() | translate:game.data.getLast() }}</p></div></md-list-item><md-list-item layout-align="center center" ng-if=game.data.getLast()><md-button ng-click=game.data.rejectCard()><md-icon class=material-icons>clear</md-icon></md-button><md-button ng-click=game.data.drawCard()><md-icon class=material-icons>check</md-icon></md-button></md-list-item><div layout=column ng-if="game.data.isLastRound() && !game.data.getLast()"><md-button class="md-warn md-raised" ng-click=game.home()>{{\'END_GAME\' | translate}}</md-button></div><div layout=column ng-if="game.hasMoreRounds() && !game.data.getLast()"><div layout=row layout-padding layout-align="center center"><md-checkbox ng-model=game.pointChange ng-if="game.data.getWorkers() < 8">{{\'POINTS\' | translate:game.points}}</md-checkbox></div><md-button class="md-raised md-warn" ng-click="game.data.newRound(game.pointChange); game.pointChange = false">{{\'NEW_ROUND\' | translate}}</md-button></div><md-subheader class=md-no-sticky ng-if="game.data.getOccupiedCards().length > 0">{{\'PLAYER_ACTIONS\' | translate}}</md-subheader><md-list-item class=md-2-line ng-repeat="item in game.data.getOccupiedCards() track by $index"><md-divider></md-divider><md-icon class="material-icons md-avatar-icon" ng-click=game.data.removeFromOccupiedCards(item)>clear</md-icon><div class=md-list-item-text layout=column><h3>{{ item.action() | translate}}</h3><p>{{ item.cost() | translate:item }}</p></div></md-list-item><md-subheader class=md-no-sticky ng-if="game.data.getPlayedCards().length > 0">{{\'EMIL_ACTIONS\' | translate}}</md-subheader><md-list-item class=md-2-line ng-repeat="item in game.data.getPlayedCards() track by $index"><md-divider></md-divider><md-icon class="material-icons md-avatar-icon" ng-click=game.data.removeFromPlayedCards(item)>check</md-icon><div class=md-list-item-text layout=column><h3>{{ item.action() | translate}}</h3><p>{{ item.cost() | translate:item }}</p></div></md-list-item></md-list></md-content><md-fab-speed-dial ng-cloak md-open=game.fabOpen md-direction=up class="md-fling md-fab-bottom-right" ng-if=game.data.getLast()><md-fab-trigger><md-button class="md-fab md-warn"><md-icon class=material-icons>star</md-icon></md-button></md-fab-trigger><md-fab-actions><md-button class="md-fab md-mini" ng-click=game.data.setWorker(6)>&lt; 50</md-button><md-button class="md-fab md-mini" ng-click=game.data.setWorker(7)>50+</md-button><md-button class="md-fab md-mini" ng-click=game.data.setWorker(8)>150+</md-button></md-fab-actions></md-fab-speed-dial>'),e.put("app/main/main.html",'<md-content layout=column layout-fill layout-align=center><md-content layout=row layout-align=center><h2>Russian Railroads</h2></md-content><md-content layout=row layout-align=center><h3>{{\'APP_HEADLINE\' | translate}}</h3></md-content><md-content layout=column><md-button class="md-raised md-warn" ng-click=main.newGame()>{{\'NEW_GAME\' | translate}}</md-button><md-button class="md-raised md-warn" ng-click=main.showRules()>{{\'RULES\' | translate}}</md-button><div layout=row layout-padding layout-align="center center"><md-checkbox ng-model=main.includeCoalModule>{{\'COAL_MODULE\' | translate}}</md-checkbox></div></md-content><md-content layout=row layout-align=center><md-button ng-click="main.switchLanguage(\'de\')"><md-icon class="flag-icon flag-icon-de"></md-icon></md-button><md-button ng-click="main.switchLanguage(\'en\')"><md-icon class="flag-icon flag-icon-gb"></md-icon></md-button></md-content><md-content layout=row layout-align=center><md-button href=https://github.com/klangfarbe/rrr>Code on github</md-button></md-content></md-content>'),e.put("app/rules/rules.html",'<md-content layout=column layout-fill><md-toolbar class=md-medium-tall layout=row layout-align="center center"><div class=md-toolbar-tools><md-button ng-click=rules.home()><md-icon><i class=material-icons>reply</i></md-icon></md-button><span>{{\'RULES\' | translate}}</span></div></md-toolbar><div layout-padding><md-content ng-if=rules.isGerman() ayout=column><md-button layout=column class="md-accent md-raised" href=http://www.hans-im-glueck.de/fileadmin/data_archive/Regeln/GRR_Regeln_download.pdf>Offizielle Regeln (PDF)</md-button><h2>Spielaufbau</h2><ul><li>Der Aufbau ist wie im 2-Spieler-Spiel.</li><li>Das Aktionsfeld <em>2 x Geld</em> steht <strong>nicht</strong> zur Verfügung und wird abgedeckt.</li><li>Du nimmst dir <strong>5</strong> anstatt nur einer Münze.</li><li>Emil bekommt zunächst 6 Arbeiter. Zwei weitere stellst du auf das Feld 50 der Zählleiste.</li></ul><h2>Ablauf</h2>Emil beginnt das Spiel und jede weitere Runde. Das Feld, welches von ihm blockiert werden möcht wird oben angezeigt. Ist das Feld von dir schon belegt oder du kannst es noch nicht benutzen (z.B. das weiße Gleis), musst du es mittels<md-icon class=material-icons>clear</md-icon>aus dem Kartenstapel entfernen. Ansonsten stellst du die Anzahl der benötigten Arbeiter auf das Feld und machst anschließend deinen Zug.<p>Nachdem du deinen Zug beendet hast, ziehst du mittels<md-icon class=material-icons>check</md-icon>eine neue Karte für Emil.</p>Das Spiel endet nach 6 (bzw. 5 Runden falls das Kohle-Modul verwendet wird). Die Anzahl der Arbeiter von Emil, die der Karten die er noch ziehen kann, deine Siegpunkte und die Runden werden in der oberen Leiste angezeigt.<h2>Hinweise</h2><ul><li>Emil benötigt kein Geld. Er nimmt dieses einfach aus dem Vorrat.</li><li>Sollte Emil nicht mehr genügend Arbeiter haben, so passt er. In diesem Fall wird eine entsprechende Information engeblendet.</li><li>Erreichst du 50 bzw. 150 Punkte, so bekommt Emil jeweils einen Arbeiter den er auch sofort einsetzen kann (sofern er noch nicht gepasst hat). Am Ende von Emils Runde wirst du gefragt, ob diese Bedingung erfüllt ist. Sollte dies während deines Zugs passieren, kannst du mittels<md-button class="md-fab md-warn md-mini"><md-icon class=material-icons>star</md-icon></md-button>deine Punktzahl auswählen.</li><li>Emil sammelt Lokomotiven und Ingenieure. Hierbei nimmt er immer die Lok mit niedrigstem Wert. Sollte keine Lok mehr ausliegen, nimmt er stattdessen die Fabrik mit der niedrigsten Zahl.</li><li>Die von Emil gesammelten Ingenieure zählen zum Spielende nur für die Mehrheitswertung.</li></ul></md-content><md-content ng-if=!rules.isGerman() layout-padding><md-button layout=column class="md-accent md-raised" href=http://www.zmangames.com/uploads/4/7/1/7/47170931/russian_railroads.pdf>Official Rules (PDF)</md-button></md-content></div></md-content>')}]);
//# sourceMappingURL=../maps/scripts/app-0ffa099405.js.map
