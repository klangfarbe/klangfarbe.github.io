!function(){"use strict";angular.module("rrrEmil",["ngRoute","ngMaterial","ngLodash","pascalprecht.translate"]).constant("CONFIG",{}).config(["$logProvider",function(e){e.debugEnabled(!0)}]).config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("lime").accentPalette("blue-grey").warnPalette("deep-orange").dark()}]).config(["$translateProvider",function(e){e.translations("de",{APP_HEADLINE:"Emil für Russian Railroads",START_ROUND:"Runde",NEW_ROUND:"Nächste Runde",NEW_GAME:"Neues Spiel",END_GAME:"Spiel beendet",POINTS:"Hast du mindestens {{points}} Punkte?",RULES:"Regeln",PLAYER_ACTIONS:"Spieleraktionen",EMIL_ACTIONS:"Von Emil besetzte Felder",EMIL_LAST_ACTION:"Emil besetzt jetzt das Feld",COAL_MODULE:"Verwende das Kohle-Modul",COSTS_COINS:"{{coins}} Münze",COSTS_WORKER:"{{worker}} Arbeiter",COSTS_WORKER_COINS:"{{worker}} Arbeiter und {{coins}} Münze",CARD_0:"3 schwarze Gleise",CARD_1:"3 silberne Gleise",CARD_2:"1 braunes Gleis",CARD_3:"2 braune Gleise",CARD_4:"1 holzfarbenes Gleis",CARD_5:"2 holzfarbene Gleise",CARD_6:"1 weißes Gleis",CARD_7:"2 weiße Gleise",CARD_8:"2 beliebige Gleise",CARD_9:"Nimm eine Lokomotive oder eine Fabrik",CARD_10:"Nimm eine Lokomotive und eine Fabrik",CARD_11:"Benutze den Ingenieur",CARD_12:"Den Ingenieur anwerben",CARD_13:"1 Schritt auf der Industrieleiste",CARD_14:"2 Schritte auf der Industrieleiste",CARD_15:"Nimm einen x2 Marker",CARD_16:"Nimm eine Kohle"}),e.translations("en",{APP_HEADLINE:"Emil for Russian Railroads",START_ROUND:"Round",NEW_ROUND:"Next round",NEW_GAME:"New game",END_GAME:"Game finished",POINTS:"Have you reached {{points}} points?",RULES:"Rules",PLAYER_ACTIONS:"Actions used by player",EMIL_ACTIONS:"Previous fields used by Emil",EMIL_LAST_ACTION:"Emil will now block the field",COAL_MODULE:"Include the coal-module",COSTS_COINS:"{{coins}} coin",COSTS_WORKER:"{{worker}} worker",COSTS_WORKER_COINS:"{{worker}} worker and {{coins}} coin",CARD_0:"3 black tracks",CARD_1:"3 silver tracks",CARD_2:"1 brown track",CARD_3:"2 brown tracks",CARD_4:"1 natural track",CARD_5:"2 natural tracks",CARD_6:"1 white track",CARD_7:"2 white tracks",CARD_8:"2 wildcard tracks",CARD_9:"Take either a locomotive or a factory",CARD_10:"Take a locomotive and a factory",CARD_11:"Use the public engineer",CARD_12:"Recruit the engineer",CARD_13:"1 move on industry track",CARD_14:"2 moves on industry track",CARD_15:"Take a 2x double marker",CARD_16:"Take a coal"}),e.registerAvailableLanguageKeys(["en","de"],{"en*":"en","de*":"de"}),e.determinePreferredLanguage(),e.useSanitizeValueStrategy("escape")}]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).when("/game",{templateUrl:"app/game/game.html",controller:"GameController",controllerAs:"game"}).when("/rules",{templateUrl:"app/rules/rules.html",controller:"RulesController",controllerAs:"rules"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";function e(e,t){var a=this;a.includeCoalModule=!1,a.newGame=function(){t.init(a.includeCoalModule),e.path("/game")}}e.$inject=["$location","Game"],angular.module("rrrEmil").controller("MainController",e)}(),function(){"use strict";function e(e){var t=!1,a=[],n=[],i=[],r=6,o=6,d=[{id:0,worker:2,coins:0},{id:1,worker:2,coins:0},{id:2,worker:1,coins:0},{id:3,worker:2,coins:0},{id:4,worker:1,coins:0},{id:5,worker:2,coins:0},{id:6,worker:1,coins:0},{id:7,worker:2,coins:0},{id:8,worker:1,coins:1},{id:9,worker:1,coins:0},{id:10,worker:3,coins:0},{id:11,worker:1,coins:0},{id:12,worker:0,coins:1},{id:13,worker:1,coins:0},{id:14,worker:2,coins:0},{id:15,worker:1,coins:0},{id:16,worker:1,coins:0}],l=function(){i=e.filter(d,function(i){return 0==s.getAvailableWorkers()?!1:16!=i.id||t?s.getAvailableWorkers()-i.worker<0?!1:e.includes(a,i,"id")?!1:e.includes(n,i,"id")?!1:!0:!1})},s={};return s.init=function(e){r=6,o=e?5:6,a.length=0,n.length=0,i.length=0,t=e,l(),s.drawCard()},s.drawCard=function(){var t=e.sample(i);t&&a.push(t),l()},s.redrawCard=function(){a.length>0&&a.length--,s.drawCard()},s.rejectCard=function(){if(a.length>0)var t=e.last(a);t&&!e.includes(n,t,"id")&&(n.push(t),s.redrawCard())},s.newRound=function(e){e&&8>r&&r++,o--,a.length=0,n.length=0,l(),s.drawCard()},s.getLast=function(){return e.last(a)},s.getPlayedCards=function(){return e.slice(a,0,a.length-1).reverse()},s.canDrawCards=function(){return s.nrCards()>0&&s.getAvailableWorkers()>0},s.nrCards=function(){return i.length},s.getOccupiedCards=function(){return n},s.getAvailableWorkers=function(){return r-e.sumBy(a,"worker")},s.getPoints=function(){return 8==r?"150+":7==r?"50+":6==r?"< 50":void 0},s.getWorkers=function(){return r},s.addWorker=function(){8>r&&r++,l()},s.setWorker=function(e){e>=6&&8>=e&&(r=e),l()},s.getRound=function(){return(t?5:6)-o+1},s.getRounds=function(){return t?5:6},s.removeCardFromPlayerStack=function(t){e.remove(n,t,"id"),l()},e.forEach(d,function(e){e.action=function(){return"CARD_"+e.id}}),e.forEach(d,function(e){e.cost=function(){var t="COSTS";return e.worker>0&&(t+="_WORKER"),e.coins>0&&(t+="_COINS"),t}}),s.init(),s}e.$inject=["lodash"],angular.module("rrrEmil").service("Game",e)}(),function(){"use strict";function e(e,t){var a=this;a.data=t,a.pointChange=!1,a.hasMoreRounds=function(){return a.points={points:6==t.getWorkers()?50:150},0===t.nrCards()&&t.getRound()<t.getRounds()},a.isLastRound=function(){return 0===t.nrCards()&&t.getRound()==t.getRounds()}}e.$inject=["lodash","Game"],angular.module("rrrEmil").controller("GameController",e)}(),angular.module("rrrEmil").run(["$templateCache",function(e){e.put("app/game/game.html",'<header><md-toolbar class=md-medium-tall layout=row layout-align="center center"><div flex=25 layout=column layout-align="center center"><md-icon><i class=material-icons>content_copy</i></md-icon>{{game.data.nrCards()}}</div><div flex=25 layout=column layout-align="center center"><md-icon><i class=material-icons>person</i></md-icon>{{game.data.getAvailableWorkers()}} / {{game.data.getWorkers()}}</div><div flex=25 layout=column layout-align="center center"><md-icon><i class=material-icons>star</i></md-icon>{{game.data.getPoints()}}</div><div flex=25 layout=column layout-align="center center"><md-icon><i class=material-icons>hourglass_empty</i></md-icon>{{game.data.getRound()}} / {{game.data.getRounds()}}</div></md-toolbar></header><md-content layout=column ng-if=game.isLastRound()><md-button class="md-warn md-raised" href=/#/ >{{\'END_GAME\' | translate}}</md-button></md-content><md-content layout=column ng-if=game.hasMoreRounds()><div layout=row layout-padding layout-align="center center"><md-checkbox ng-model=game.pointChange ng-if="game.data.getWorkers() < 8">{{\'POINTS\' | translate:game.points}}</md-checkbox></div><md-button class="md-raised md-warn" ng-click="game.data.newRound(game.pointChange); game.pointChange = false">{{\'NEW_ROUND\' | translate}}</md-button></md-content><md-content layout=column><md-list><md-subheader ng-if=game.data.getLast()>{{\'EMIL_LAST_ACTION\' | translate}}</md-subheader><md-list-item class=md-2-line ng-if=game.data.getLast()><div class=md-list-item-text layout=column layout-align="center center"><h3>{{game.data.getLast().action() | translate}}</h3><p>{{game.data.getLast().cost() | translate:game.data.getLast() }}</p></div></md-list-item><md-list-item layout-align="center center" ng-if=game.data.getLast()><md-button ng-click=game.data.rejectCard()><md-icon><i class=material-icons>clear</i></md-icon></md-button><md-button ng-click=game.data.drawCard() ng-disabled=!game.data.canDrawCards()><md-icon><i class=material-icons>navigate_next</i></md-icon></md-button><md-button ng-click=game.data.redrawCard()><md-icon><i class=material-icons>refresh</i></md-icon></md-button></md-list-item><md-subheader ng-if="game.data.getOccupiedCards().length > 0">{{\'PLAYER_ACTIONS\' | translate}}</md-subheader><md-list-item class=md-2-line ng-repeat="item in game.data.getOccupiedCards() track by item.id"><md-divider></md-divider><md-icon class=md-avatar-icon ng-click=game.data.removeCardFromPlayerStack(item)><i class=material-icons>clear</i></md-icon><div class=md-list-item-text layout=column><h3>{{ item.action() | translate}}</h3><p>{{ item.cost() | translate:item }}</p></div></md-list-item><md-subheader ng-if="game.data.getPlayedCards().length > 0">{{\'EMIL_ACTIONS\' | translate}}</md-subheader><md-list-item class=md-2-line ng-repeat="item in game.data.getPlayedCards() track by item.id"><md-divider></md-divider><md-icon class=md-avatar-icon><i class=material-icons>navigate_next</i></md-icon><div class=md-list-item-text layout=column><h3>{{ item.action() | translate}}</h3><p>{{ item.cost() | translate:item }}</p></div></md-list-item></md-list></md-content><md-fab-speed-dial md-open=game.fabOpen md-direction=up class="md-scale md-fab-bottom-right"><md-fab-trigger><md-button class="md-fab md-warn"><md-icon><i class=material-icons>star</i></md-icon></md-button></md-fab-trigger><md-fab-actions><md-button class="md-fab md-raised md-mini" ng-click=game.data.setWorker(6)>&lt; 50</md-button><md-button class="md-fab md-raised md-mini" ng-click=game.data.setWorker(7)>50+</md-button><md-button class="md-fab md-raised md-mini" ng-click=game.data.setWorker(8)>150+</md-button></md-fab-actions></md-fab-speed-dial>'),e.put("app/main/main.html",'<header><md-toolbar class=md-medium-tall layout=row layout-align="center center"><div flex layout=column layout-align="center center">{{\'APP_HEADLINE\' | translate}}</div></md-toolbar></header><md-content layout-padding layout=column layout-align=center><md-button class="md-raised md-warn" ng-click=main.newGame()>{{\'NEW_GAME\' | translate}}</md-button><md-button class="md-raised md-warn" ng-click=main.showRules()>{{\'RULES\' | translate}}</md-button><div layout=row layout-padding layout-align="center center"><md-checkbox ng-model=main.includeCoalModule>{{\'COAL_MODULE\' | translate}}</md-checkbox></div><md-content></md-content></md-content>')}]);
//# sourceMappingURL=../maps/scripts/app-086e1cd103.js.map
