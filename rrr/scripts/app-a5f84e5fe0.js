!function(){"use strict";angular.module("rrrEmil",["ngRoute","ngMaterial","ngLodash","pascalprecht.translate"]).constant("CONFIG",{}).config(["$logProvider",function(e){e.debugEnabled(!1)}]).config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("lime").accentPalette("blue-grey").warnPalette("deep-orange").dark()}]).config(["$translateProvider",function(e){e.translations("de",{PERMISSION:"Mit Genehmigung vom Hans im Glück Verlag",APP_HEADLINE:"Solo-Variante - Emil will spielen",START_ROUND:"Runde",NEW_ROUND:"Nächste Runde",NEW_GAME:"Neues Spiel",END_GAME:"Spiel beendet",POINTS:"Hast du mindestens {{points}} Punkte?",RULES:"Regeln",BLOCKED_ACTIONS:"Felder die Emil nicht belegen konnte",EMIL_ACTIONS:"Von Emil belegte Felder",EMIL_PASSES:"Emil hat gepasst",CAN_TAKE_ACTION:"Kann Emil die Aktion ausführen?",REJECT_ACTION:"Nein",ACCEPT_ACTION:"Ja",COAL_MODULE:"Verwende das Kohle-Modul",TRACKS_AVAILABLE:"Verfügbare Gleise",COSTS_COINS:"{{coins}} Münze",COSTS_WORKER:"{{worker}} Arbeiter",COSTS_WORKER_COINS:"{{worker}} Arbeiter und {{coins}} Münze",CARD_0:"1 weißes Gleis",CARD_1:"2 weiße Gleise",CARD_2:"1 holzfarbenes Gleis",CARD_3:"2 holzfarbene Gleise",CARD_4:"1 braunes Gleis",CARD_5:"2 braune Gleise",CARD_6:"3 graue Gleise",CARD_7:"3 schwarze Gleise",CARD_8:"2 beliebige Gleise",CARD_9:"Nimm eine Lok oder eine Fabrik",CARD_10:"Nimm eine Lok und eine Fabrik",CARD_11:"Benutze den Ingenieur",CARD_12:"Den Ingenieur anwerben",CARD_13:"1 Schritt auf der Industrieleiste",CARD_14:"2 Schritte auf der Industrieleiste",CARD_15:"Nimm einen x2 Marker",CARD_16:"Nimm eine Kohle"}),e.translations("en",{PERMISSION:"With permission of Hans im Glück Verlag",APP_HEADLINE:"Solo-Variant - Emil wants to play",START_ROUND:"Round",NEW_ROUND:"Next round",NEW_GAME:"New game",END_GAME:"Game finished",POINTS:"Have you reached {{points}} points?",RULES:"Rules",BLOCKED_ACTIONS:"Actions Emil could not take",EMIL_ACTIONS:"Actions Emil took",EMIL_PASSES:"Emil has passed",CAN_TAKE_ACTION:"Can Emil take the action?",REJECT_ACTION:"No",ACCEPT_ACTION:"Yes",COAL_MODULE:"Include coal-module",TRACKS_AVAILABLE:"Usable tracks",COSTS_COINS:"{{coins}} coin",COSTS_WORKER:"{{worker}} worker",COSTS_WORKER_COINS:"{{worker}} worker and {{coins}} coin",CARD_0:"1 white track",CARD_1:"2 white tracks",CARD_2:"1 natural track",CARD_3:"2 natural tracks",CARD_4:"1 brown track",CARD_5:"2 brown tracks",CARD_6:"3 grey tracks",CARD_7:"3 black tracks",CARD_8:"2 wildcard tracks",CARD_9:"Take a locomotive or a factory",CARD_10:"Take a locomotive and a factory",CARD_11:"Use the public engineer",CARD_12:"Recruit the engineer",CARD_13:"1 move on industry track",CARD_14:"2 moves on industry track",CARD_15:"Take a 2x double marker",CARD_16:"Take a coal"}),e.registerAvailableLanguageKeys(["en","de"],{"en*":"en","de*":"de"}),e.preferredLanguage("de"),e.useSanitizeValueStrategy("escape")}]).config(["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1})}]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"app/main/main.html"}).when("/game",{templateUrl:"app/game/game.html",controller:"GameController",controllerAs:"game"}).when("/rules",{templateUrl:"app/rules/rules.html",controller:"RulesController",controllerAs:"rules"}).otherwise({redirectTo:"/"})}]).config(["$mdIconProvider",function(e){e.icon("track:black","assets/black.svg").icon("track:brown","assets/brown.svg").icon("track:grey","assets/grey.svg").icon("track:natural","assets/natural.svg").icon("track:white","assets/white.svg")}]).run(["$log",function(e){e.debug("runBlock end")}])}(),function(){"use strict";function e(e,t){var n=this;n.home=function(){e.path("/")},n.isGerman=function(){return"de"===t.use()}}e.$inject=["$location","$translate"],angular.module("rrrEmil").controller("RulesController",e),angular.module("rrrEmil").directive("rulesDe",function(){return{templateUrl:"app/rules/rules_de.html"}}),angular.module("rrrEmil").directive("rulesEn",function(){return{templateUrl:"app/rules/rules_en.html"}})}(),function(){"use strict";function e(e,t,n,a){var i=this;i.includeCoalModule=!1,i.newGame=function(){a.init(i.includeCoalModule),t.path("/game")},i.switchLanguage=function(e){n.use(e)},i.showRules=function(){t.path("/rules")},i.home=function(){t.path("/")},i.screenIsSmall=function(){return e("xs")}}e.$inject=["$mdMedia","$location","$translate","Game"],angular.module("rrrEmil").controller("MainController",e)}(),function(){"use strict";function e(e){var t,n=!1,a=[],i=[],l=[],r=6,d=6,o=[{id:0,worker:1,coins:0},{id:1,worker:2,coins:0},{id:2,worker:1,coins:0},{id:3,worker:2,coins:0},{id:4,worker:1,coins:0},{id:5,worker:2,coins:0},{id:6,worker:2,coins:0},{id:7,worker:2,coins:0},{id:8,worker:1,coins:1},{id:9,worker:1,coins:0},{id:10,worker:3,coins:0},{id:11,worker:1,coins:0},{id:12,worker:0,coins:1},{id:13,worker:1,coins:0},{id:14,worker:2,coins:0},{id:15,worker:1,coins:0},{id:16,worker:1,coins:0}],s={};return s.tracks="black",s.calculateDrawableCards=function(){l=e.filter(o,function(t){var l=r-e.sumBy(a,"worker");return 0==l||l-t.worker<0?!1:"black"==s.tracks&&t.id<7?!1:"grey"==s.tracks&&t.id<6?!1:"brown"==s.tracks&&t.id<4?!1:"natural"==s.tracks&&t.id<2?!1:16!=t.id||n?e.includes(a,t,"id")?!1:e.includes(i,t,"id")?!1:!0:!1})},s.init=function(e){r=6,d=e?5:6,a.length=0,i.length=0,l.length=0,n=e,s.tracks="black",s.drawCard()},s.drawCard=function(){s.calculateDrawableCards(),t=e.sample(l)},s.acceptCard=function(){t&&a.push(t),s.drawCard()},s.rejectCard=function(){t&&i.push(t),s.drawCard()},s.newRound=function(e){e&&8>r&&r++,d--,a.length=0,i.length=0,s.drawCard()},s.getLast=function(){return t},s.getPlayedCards=function(){return e.clone(a).reverse()},s.canDrawCards=function(){return s.nrCards()>0&&s.getAvailableWorkers()>0},s.nrCards=function(){return l.length},s.getOccupiedCards=function(){return e.clone(i).reverse()},s.getAvailableWorkers=function(){return r-e.sumBy(a,"worker")},s.getPoints=function(){return 8==r?"150+":7==r?"50+":6==r?"< 50":void 0},s.getWorkers=function(){return r},s.addWorker=function(){8>r&&r++,s.calculateDrawableCards()},s.setWorker=function(e){e>=6&&8>=e&&(r=e),s.calculateDrawableCards()},s.getRound=function(){return(n?5:6)-d+1},s.getRounds=function(){return n?5:6},s.isLastRound=function(){return 0===s.nrCards()&&s.getRound()==s.getRounds()},s.hasMoreRounds=function(){return 0===s.nrCards()&&s.getRound()<s.getRounds()},s.removeFromOccupiedCards=function(n){e.remove(i,n,"id"),s.calculateDrawableCards(),t||s.drawCard()},s.removeFromPlayedCards=function(n){e.remove(a,n,"id"),s.calculateDrawableCards(),t||s.drawCard()},e.forEach(o,function(e){e.action=function(){return"CARD_"+e.id}}),e.forEach(o,function(e){e.cost=function(){var t="COSTS";return e.worker>0&&(t+="_WORKER"),e.coins>0&&(t+="_COINS"),t}}),s.init(),s}e.$inject=["lodash"],angular.module("rrrEmil").service("Game",e)}(),function(){"use strict";function e(e,t,n,a){var i=this;i.data=a,i.pointChange=!1,i.fabOpen=!1,i.hasMoreRounds=function(){return i.points={points:6==a.getWorkers()?50:150},a.hasMoreRounds()},e.$watch(function(){return a.tracks},function(){a.calculateDrawableCards(),a.getLast()||a.drawCard()})}e.$inject=["$scope","$location","lodash","Game"],angular.module("rrrEmil").controller("GameController",e)}(),angular.module("rrrEmil").run(["$templateCache",function(e){e.put("app/game/game.html",'<md-content layout=row layout-fill layout-align="center start"><div layout=column layout-align=center flex><md-toolbar class=md-medium-tall layout=row layout-align="center center"><div class=md-toolbar-tools flex-xs=100 flex-sm=60 flex-md=40 flex-lg=25 flex-xl=20><div flex layout=column layout-align="center center"><md-icon class=material-icons>content_copy</md-icon>{{game.data.nrCards()}}</div><div flex layout=column layout-align="center center"><md-icon class=material-icons>person</md-icon>{{game.data.getAvailableWorkers()}} / {{game.data.getWorkers()}}</div><div flex layout=column layout-align="center center"><md-icon class=material-icons>star</md-icon>{{game.data.getPoints()}}</div><div flex layout=column layout-align="center center"><md-icon class=material-icons>hourglass_empty</md-icon>{{game.data.getRound()}} / {{game.data.getRounds()}}</div></div></md-toolbar><div layout=row layout-align=center><div flex-xs=100 flex-sm=60 flex-md=40 flex-lg=25 flex-xl=20><div layout-padding layout=row layout-align=center><md-radio-group layout=row layout-sm=column ng-model=game.data.tracks><md-radio-button value=black aria-label="black track" class=md-primary><md-icon md-svg-icon=track:black></md-icon></md-radio-button><md-radio-button value=grey aria-label="grey track" class=md-primary><md-icon md-svg-icon=track:grey></md-icon></md-radio-button><md-radio-button value=brown aria-label="brown track" class=md-primary><md-icon md-svg-icon=track:brown></md-icon></md-radio-button><md-radio-button value=natural aria-label="natural track" class=md-primary><md-icon md-svg-icon=track:natural></md-icon></md-radio-button><md-radio-button value=white aria-label="white track" class=md-primary><md-icon md-svg-icon=track:white></md-icon></md-radio-button></md-radio-group></div><md-divider></md-divider></div></div><!-- Game buttons and logic --><md-content layout=row layout-align=center><div flex-xs=100 flex-sm=60 flex-md=40 flex-lg=25 flex-xl=20><md-list><md-list-item class=md-2-line ng-if=!game.data.getLast()><div class=md-list-item-text layout=column layout-align="center center"><h3>{{\'EMIL_PASSES\' | translate}}</h3></div></md-list-item><md-list-item class=md-2-line ng-if=game.data.getLast()><div class=md-list-item-text layout=column layout-align="center center"><h3>{{game.data.getLast().action() | translate}}</h3><p>{{game.data.getLast().cost() | translate:game.data.getLast() }}</p></div></md-list-item><md-list-item layout-align=center ng-if=game.data.getLast()><md-subheader class=md-no-sticky>{{\'CAN_TAKE_ACTION\' | translate}}</md-subheader></md-list-item><md-list-item layout-align="center center" ng-if=game.data.getLast()><md-button ng-click=game.data.rejectCard()><md-icon class=material-icons>clear</md-icon>{{\'REJECT_ACTION\' | translate}}</md-button><md-button ng-click=game.data.acceptCard()><md-icon class=material-icons>check</md-icon>{{\'ACCEPT_ACTION\' | translate}}</md-button></md-list-item><div layout=column ng-if="game.data.isLastRound() && !game.data.getLast()"><md-button class="md-warn md-raised" ng-click=main.home()>{{\'END_GAME\' | translate}}</md-button></div><div layout=column ng-if="game.hasMoreRounds() && !game.data.getLast()"><div layout=row layout-padding layout-align="center center"><md-checkbox ng-model=game.pointChange ng-if="game.data.getWorkers() < 8">{{\'POINTS\' | translate:game.points}}</md-checkbox></div><md-button class="md-raised md-warn" ng-click="game.data.newRound(game.pointChange); game.pointChange = false">{{\'NEW_ROUND\' | translate}}</md-button></div></md-list></div></md-content><!-- Action lists --><md-content layout=row layout-align=center ng-if=!main.screenIsSmall()><div flex-sm=50 flex-md=40 flex-lg=25 flex-xl=20><div flex><div layout=row layout-align=center><md-list ng-if="game.data.getOccupiedCards().length > 0" flex><md-subheader class=md-no-sticky>{{\'BLOCKED_ACTIONS\' | translate}}</md-subheader><md-list-item class=md-2-line ng-repeat="item in game.data.getOccupiedCards() track by $index"><md-divider></md-divider><md-icon class="material-icons md-avatar-icon" ng-click=game.data.removeFromOccupiedCards(item)>clear</md-icon><div class=md-list-item-text layout=column><h3>{{ item.action() | translate}}</h3><p>{{ item.cost() | translate:item }}</p></div></md-list-item></md-list></div></div></div><div flex-sm=50 flex-md=40 flex-lg=25 flex-xl=20><div flex><div layout=row layout-align=center><md-list ng-if="game.data.getPlayedCards().length > 0" flex><md-subheader class=md-no-sticky>{{\'EMIL_ACTIONS\' | translate}}</md-subheader><md-list-item class=md-2-line ng-repeat="item in game.data.getPlayedCards() track by $index"><md-divider></md-divider><md-icon class="material-icons md-avatar-icon" ng-click=game.data.removeFromPlayedCards(item)>check</md-icon><div class=md-list-item-text layout=column><h3>{{ item.action() | translate}}</h3><p>{{ item.cost() | translate:item }}</p></div></md-list-item></md-list></div></div></div></md-content><md-content layout=row layout-align=center ng-if=main.screenIsSmall()><md-list flex><md-subheader ng-if="game.data.getOccupiedCards().length > 0" class=md-no-sticky>{{\'BLOCKED_ACTIONS\' | translate}}</md-subheader><md-list-item ng-if="game.data.getOccupiedCards().length > 0" class=md-2-line ng-repeat="item in game.data.getOccupiedCards() track by $index"><md-divider></md-divider><md-icon class="material-icons md-avatar-icon" ng-click=game.data.removeFromOccupiedCards(item)>clear</md-icon><div class=md-list-item-text layout=column><h3>{{ item.action() | translate}}</h3><p>{{ item.cost() | translate:item }}</p></div></md-list-item><md-subheader ng-if="game.data.getPlayedCards().length > 0" class=md-no-sticky>{{\'EMIL_ACTIONS\' | translate}}</md-subheader><md-list-item ng-if="game.data.getPlayedCards().length > 0" class=md-2-line ng-repeat="item in game.data.getPlayedCards() track by $index"><md-divider></md-divider><md-icon class="material-icons md-avatar-icon" ng-click=game.data.removeFromPlayedCards(item)>check</md-icon><div class=md-list-item-text layout=column><h3>{{ item.action() | translate}}</h3><p>{{ item.cost() | translate:item }}</p></div></md-list-item></md-list></md-content></div></md-content><md-fab-speed-dial ng-cloak md-open=game.fabOpen md-direction=up class="md-fling md-fab-bottom-right" ng-if=game.data.getLast()><md-fab-trigger><md-button class="md-fab md-warn"><md-icon class=material-icons>star</md-icon></md-button></md-fab-trigger><md-fab-actions><md-button class="md-fab md-mini" ng-click=game.data.setWorker(6)>&lt; 50</md-button><md-button class="md-fab md-mini" ng-click=game.data.setWorker(7)>50+</md-button><md-button class="md-fab md-mini" ng-click=game.data.setWorker(8)>150+</md-button></md-fab-actions></md-fab-speed-dial>'),e.put("app/main/main.html",'<md-content layout=column layout-fill><md-content layout=row layout-padding layout-align=center><div layout=column layout-align="center center"><h2>Russian Railroads</h2><h3>{{\'APP_HEADLINE\' | translate}}</h3><md-button style="width: 100%" class="md-raised md-warn" ng-click=main.newGame()>{{\'NEW_GAME\' | translate}}</md-button><md-button style="width: 100%" class="md-raised md-warn" ng-click=main.showRules()>{{\'RULES\' | translate}}</md-button><md-checkbox ng-model=main.includeCoalModule>{{\'COAL_MODULE\' | translate}}</md-checkbox></div></md-content><div layout=row layout-align=center><md-button ng-click="main.switchLanguage(\'de\')"><md-icon class="flag-icon flag-icon-de"></md-icon></md-button><md-button ng-click="main.switchLanguage(\'en\')"><md-icon class="flag-icon flag-icon-gb"></md-icon></md-button></div><footer><div layout-gt-xs=row layout-xs=column layout-align="center center"><md-button href=https://github.com/klangfarbe/rrr><small>Code on github</small></md-button><md-button href=http://www.hans-im-glueck.de/ ><small>{{\'PERMISSION\' | translate}}</small></md-button></div></footer></md-content>'),e.put("app/rules/rules.html",'<md-content layout=row layout-fill layout-align="center start"><div layout=column layout-align=center flex><md-toolbar class=md-medium-tall layout=row layout-align="center center"><div class=md-toolbar-tools flex-xs=100 flex-sm=60 flex-md=40 flex-lg=25><md-button ng-click=rules.home()><md-icon class=material-icons>reply</md-icon></md-button><span>{{\'RULES\' | translate}}</span></div></md-toolbar><div layout=row layout-align=center ng-if=rules.isGerman()><div flex-xs=100 flex-sm=60 flex-md=40 flex-lg=25 layout-padding><rules-de></rules-de></div></div><div layout=row layout-align=center ng-if=!rules.isGerman()><div flex-xs=100 flex-sm=60 flex-md=40 flex-lg=25 layout-padding><rules-en></rules-en></div></div></div></md-content>'),e.put("app/rules/rules_de.html",'<md-button layout=column class="md-accent md-raised" href=http://www.hans-im-glueck.de/fileadmin/data_archive/Regeln/GRR_Regeln_download.pdf>Offizielle Regeln (PDF)</md-button><h2>Spielaufbau</h2><ul><li>Der Aufbau ist wie im 2-Spieler-Spiel.</li><li>Das Aktionsfeld <em>2 x Geld</em> steht <strong>nicht</strong> zur Verfügung und wird abgedeckt.</li><li>Du nimmst dir <strong>5</strong> anstatt nur einer Münze.</li><li>Emil bekommt zunächst 6 Arbeiter. Zwei weitere stellst du auf das Feld 50 der Zählleiste.</li></ul><h2>Ablauf</h2>Emil beginnt das Spiel und jede weitere Runde. Das Feld, welches von ihm blockiert werden möcht wird oben angezeigt. Ist das Feld von dir schon belegt oder du kannst es noch nicht benutzen (z.B. das weiße Gleis), musst du es mittels<md-icon class=material-icons>clear</md-icon>aus dem Kartenstapel entfernen. Ansonsten stellst du die Anzahl der benötigten Arbeiter auf das Feld und machst anschließend deinen Zug.<p>Nachdem du deinen Zug beendet hast, ziehst du mittels<md-icon class=material-icons>check</md-icon>eine neue Karte für Emil.</p>Das Spiel endet nach 6 (bzw. 5 Runden falls das Kohle-Modul verwendet wird). Die Anzahl der Arbeiter von Emil, die der Karten die er noch ziehen kann, deine Siegpunkte und die Runden werden in der oberen Leiste angezeigt.<h2>Hinweise</h2><ul><li>Emil benötigt kein Geld. Er nimmt dieses einfach aus dem Vorrat.</li><li>Sollte Emil nicht mehr genügend Arbeiter haben, so passt er. In diesem Fall wird eine entsprechende Information engeblendet.</li><li>Erreichst du 50 bzw. 150 Punkte, so bekommt Emil jeweils einen Arbeiter den er auch sofort einsetzen kann (sofern er noch nicht gepasst hat). Am Ende von Emils Runde wirst du gefragt, ob diese Bedingung erfüllt ist. Sollte dies während deines Zugs passieren, kannst du mittels<md-button class="md-fab md-warn md-mini"><md-icon class=material-icons>star</md-icon></md-button>deine Punktzahl auswählen.</li><li>Emil sammelt Lokomotiven und Ingenieure. Hierbei nimmt er immer die Lok mit niedrigstem Wert. Sollte keine Lok mehr ausliegen, nimmt er stattdessen die Fabrik mit der niedrigsten Zahl.</li><li>Die von Emil gesammelten Ingenieure zählen zum Spielende nur für die Mehrheitswertung.</li></ul>'),e.put("app/rules/rules_en.html",'<md-button layout=column class="md-accent md-raised" href=http://www.zmangames.com/uploads/4/7/1/7/47170931/russian_railroads.pdf>Official Rules (PDF)</md-button><h2>Game Setup</h2>Todo <!-- <ul>\n    <li>Der Aufbau ist wie im 2-Spieler-Spiel.</li>\n    <li>Das Aktionsfeld <em>2 x Geld</em> steht <strong>nicht</strong> zur Verfügung und wird abgedeckt.</li>\n    <li>Du nimmst dir <strong>5</strong> anstatt nur einer Münze.</li>\n    <li>Emil bekommt zunächst 6 Arbeiter. Zwei weitere stellst du auf das Feld 50 der Zählleiste.</li>\n</ul>\n<h2>Ablauf</h2>\nEmil beginnt das Spiel und jede weitere Runde. Das Feld, welches\nvon ihm blockiert werden möcht wird oben angezeigt. Ist das Feld\nvon dir schon belegt oder du kannst es noch nicht benutzen\n(z.B. das weiße Gleis), musst du es mittels\n<md-icon class="material-icons">clear</md-icon> aus dem\nKartenstapel entfernen. Ansonsten stellst du die Anzahl der\nbenötigten Arbeiter auf das Feld und machst anschließend deinen Zug.\n\n<p>\nNachdem du deinen Zug beendet hast, ziehst du mittels\n<md-icon class="material-icons">check</md-icon> eine neue Karte\nfür Emil.\n</p>\nDas Spiel endet nach 6 (bzw. 5 Runden falls das Kohle-Modul verwendet wird).\nDie Anzahl der Arbeiter von Emil, die der Karten die er noch ziehen kann,\ndeine Siegpunkte und die Runden werden in der oberen Leiste angezeigt.\n\n<h2>Hinweise</h2>\n<ul>\n    <li>Emil benötigt kein Geld. Er nimmt dieses einfach aus dem Vorrat.</li>\n    <li>Sollte Emil nicht mehr genügend Arbeiter haben, so passt er.\n    In diesem Fall wird eine entsprechende Information engeblendet.</li>\n    <li>Erreichst du 50 bzw. 150 Punkte, so bekommt Emil jeweils einen Arbeiter\n    den er auch sofort einsetzen kann (sofern er noch nicht gepasst hat).\n    Am Ende von Emils Runde wirst du gefragt,\n    ob diese Bedingung erfüllt ist. Sollte dies während deines Zugs passieren, kannst\n    du mittels <md-button class="md-fab md-warn md-mini"><md-icon class="material-icons">star</md-icon></md-button> deine Punktzahl auswählen.\n    </li>\n    <li>Emil sammelt Lokomotiven und Ingenieure. Hierbei nimmt er\n    immer die Lok mit niedrigstem Wert. Sollte keine Lok mehr\n    ausliegen, nimmt er stattdessen die Fabrik mit der niedrigsten\n    Zahl.</li>\n    <li>Die von Emil gesammelten Ingenieure zählen zum Spielende\n    nur für die Mehrheitswertung.</li>\n</ul>\n -->')}]);
//# sourceMappingURL=../maps/scripts/app-a5f84e5fe0.js.map
